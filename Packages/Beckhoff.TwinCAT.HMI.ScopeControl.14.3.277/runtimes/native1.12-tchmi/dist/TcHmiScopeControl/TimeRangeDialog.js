var __runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};let TimeRangeDialog=(()=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m;let ___onCancelPressed_decorators,___onRefreshPressed_decorators,___onApplyPressed_decorators,___onValueChangedStart_decorators,___onValueChangedEnd_decorators,___onMouseDownList_decorators,___onMouseDown_decorators,___onTouchStart_decorators,___onMouseMove_decorators,___onTouchMove_decorators,___onMouseUp_decorators,___onTouchEnd_decorators,_instanceExtraInitializers=[];return class{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;___onCancelPressed_decorators=[(_a=TcHmi).CallbackMethod.bind(_a)],___onRefreshPressed_decorators=[(_b=TcHmi).CallbackMethod.bind(_b)],___onApplyPressed_decorators=[(_c=TcHmi).CallbackMethod.bind(_c)],___onValueChangedStart_decorators=[(_d=TcHmi).CallbackMethod.bind(_d)],___onValueChangedEnd_decorators=[(_e=TcHmi).CallbackMethod.bind(_e)],___onMouseDownList_decorators=[(_f=TcHmi).CallbackMethod.bind(_f)],___onMouseDown_decorators=[(_g=TcHmi).CallbackMethod.bind(_g)],___onTouchStart_decorators=[(_h=TcHmi).CallbackMethod.bind(_h)],___onMouseMove_decorators=[(_j=TcHmi).CallbackMethod.bind(_j)],___onTouchMove_decorators=[(_k=TcHmi).CallbackMethod.bind(_k)],___onMouseUp_decorators=[(_l=TcHmi).CallbackMethod.bind(_l)],___onTouchEnd_decorators=[(_m=TcHmi).CallbackMethod.bind(_m)],__esDecorate(this,null,___onCancelPressed_decorators,{kind:"method",name:"__onCancelPressed",static:!1,private:!1,access:{has:obj=>"__onCancelPressed"in obj,get:obj=>obj.__onCancelPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onRefreshPressed_decorators,{kind:"method",name:"__onRefreshPressed",static:!1,private:!1,access:{has:obj=>"__onRefreshPressed"in obj,get:obj=>obj.__onRefreshPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onApplyPressed_decorators,{kind:"method",name:"__onApplyPressed",static:!1,private:!1,access:{has:obj=>"__onApplyPressed"in obj,get:obj=>obj.__onApplyPressed},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onValueChangedStart_decorators,{kind:"method",name:"__onValueChangedStart",static:!1,private:!1,access:{has:obj=>"__onValueChangedStart"in obj,get:obj=>obj.__onValueChangedStart},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onValueChangedEnd_decorators,{kind:"method",name:"__onValueChangedEnd",static:!1,private:!1,access:{has:obj=>"__onValueChangedEnd"in obj,get:obj=>obj.__onValueChangedEnd},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onMouseDownList_decorators,{kind:"method",name:"__onMouseDownList",static:!1,private:!1,access:{has:obj=>"__onMouseDownList"in obj,get:obj=>obj.__onMouseDownList},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onMouseDown_decorators,{kind:"method",name:"__onMouseDown",static:!1,private:!1,access:{has:obj=>"__onMouseDown"in obj,get:obj=>obj.__onMouseDown},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onTouchStart_decorators,{kind:"method",name:"__onTouchStart",static:!1,private:!1,access:{has:obj=>"__onTouchStart"in obj,get:obj=>obj.__onTouchStart},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onMouseMove_decorators,{kind:"method",name:"__onMouseMove",static:!1,private:!1,access:{has:obj=>"__onMouseMove"in obj,get:obj=>obj.__onMouseMove},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onTouchMove_decorators,{kind:"method",name:"__onTouchMove",static:!1,private:!1,access:{has:obj=>"__onTouchMove"in obj,get:obj=>obj.__onTouchMove},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onMouseUp_decorators,{kind:"method",name:"__onMouseUp",static:!1,private:!1,access:{has:obj=>"__onMouseUp"in obj,get:obj=>obj.__onMouseUp},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onTouchEnd_decorators,{kind:"method",name:"__onTouchEnd",static:!1,private:!1,access:{has:obj=>"__onTouchEnd"in obj,get:obj=>obj.__onTouchEnd},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}constructor(element,control){if(this.__parentControl=control,this.__element=element,this.__elementList=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-time-range-dialog-list")[0],this.__elementSliderTemplate=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-template")[0],this.__elementSliderValue=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-value")[0],this.__elementSliderValueText=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-value-text")[0],this.__elementSliderMin=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-knob-min-value")[0],this.__elementSliderMax=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-knob-max-value")[0],this.__elementList=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-time-range-dialog-list")[0],this.__elementRecordTimespanControl=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-control-for-record")[0],this.__elementLoading=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-time-range-dialog-loading")[0],this.__elementNoDataText=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-time-range-dialog-no-data-text")[0],this.__elementLoadingOverlay=this.__element.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-time-range-dialog-loading-overlay")[0],!(this.__parentControl&&this.__element&&this.__elementList&&this.__elementSliderTemplate&&this.__elementSliderValue&&this.__elementSliderValueText&&this.__elementSliderMin&&this.__elementSliderMax&&this.__elementList&&this.__elementRecordTimespanControl&&this.__elementLoading&&this.__elementNoDataText&&this.__elementLoadingOverlay))throw new Error("Invalid Template.html");const datetimeStart=TcHmi.Controls.get(this.__parentControl.getId()+".datetimeInputStart"),datetimeEnd=TcHmi.Controls.get(this.__parentControl.getId()+".datetimeInputEnd"),intervalTime=TcHmi.Controls.get(this.__parentControl.getId()+".timespanTextblock"),applyButton=TcHmi.Controls.get(this.__parentControl.getId()+".applyAquisitionsButton"),cancelButton=TcHmi.Controls.get(this.__parentControl.getId()+".cancelTimeRangeButton"),refreshButton=TcHmi.Controls.get(this.__parentControl.getId()+".refreshTimeRangeButton");if(!(datetimeStart&&datetimeEnd&&intervalTime&&applyButton&&cancelButton&&refreshButton))throw new Error("Invalid Template.html");this.__datetimeStart=datetimeStart,this.__datetimeEnd=datetimeEnd,this.__intervalTime=intervalTime,this.__applyButton=applyButton,this.__cancelButton=cancelButton,this.__refreshButton=refreshButton,this.__eventDestroyers.push(TcHmi.EventProvider.registerDomEvent(this.__elementSliderMin,"mousedown",this.__onMouseDown),TcHmi.EventProvider.registerDomEvent(this.__elementSliderMin,"touchstart",this.__onTouchStart,{passive:!1}),TcHmi.EventProvider.registerDomEvent(this.__elementSliderMax,"mousedown",this.__onMouseDown),TcHmi.EventProvider.registerDomEvent(this.__elementSliderMax,"touchstart",this.__onTouchStart,{passive:!1}),TcHmi.EventProvider.registerDomEvent(document,"mousemove",this.__onMouseMove),TcHmi.EventProvider.registerDomEvent(document,"touchmove",this.__onTouchMove,{passive:!1}),TcHmi.EventProvider.registerDomEvent(document,"mouseup",this.__onMouseUp),TcHmi.EventProvider.registerDomEvent(document,"touchend",this.__onTouchEnd,{passive:!1}),TcHmi.EventProvider.register(this.__parentControl.getId()+".datetimeInputStart.onValueChanged",this.__onValueChangedStart),TcHmi.EventProvider.register(this.__parentControl.getId()+".datetimeInputEnd.onValueChanged",this.__onValueChangedEnd),TcHmi.EventProvider.register(this.__parentControl.getId()+".applyAquisitionsButton.onPressed",this.__onApplyPressed),TcHmi.EventProvider.register(this.__parentControl.getId()+".cancelTimeRangeButton.onPressed",this.__onCancelPressed),TcHmi.EventProvider.register(this.__parentControl.getId()+".refreshTimeRangeButton.onPressed",this.__onRefreshPressed)),this.__textFontStyle=TcHmi.StyleProvider.getComputedElementStyle(this.__elementSliderValueText,"font").font;let loadingSpinnerDivTempDiv=document.createElement("div");loadingSpinnerDivTempDiv.innerHTML='<div class="TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-loading-spinner-container"><div class="TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-loading-spinner"><div></div><div></div><div></div><div></div></div></div>',this.__loadingSpinner=loadingSpinnerDivTempDiv.firstElementChild,this.__elementNoDataText.style.display="none"}__parentControl=__runInitializers(this,_instanceExtraInitializers);__element;__elementLoading;__elementList;__elementRecordTimespanControl;__elementSliderTemplate;__elementSliderValue;__elementSliderValueText;__elementSliderMin;__elementSliderMax;__elementNoDataText;__elementLoadingOverlay;__data=[];__activeData=null;__isShowing=!1;__eventDestroyers=[];__listElements=[];__datetimeStart;__datetimeEnd;__intervalTime;__applyButton;__refreshButton;__cancelButton;__ignoreDateTimeInputEvents=!1;__draggingInfo={isDragging:!1,draggingElem:null,offsetLeft:0,startPositionX:0};__textFontStyle="";__loadingSpinner=null;show(){this.__isShowing||(TcHmi.TopMostLayer.add(this.__parentControl,this.__element,{removeCb:()=>{this.__isShowing=!1},centerHorizontal:!0,centerVertical:!0}),this.__isShowing=!0,this.__loadingSpinner&&(this.__elementLoading.appendChild(this.__loadingSpinner),this.__elementLoadingOverlay.style.display=""),this.__parentControl.__serverSymbolsHelper.getAnalyticsData())}hide(){this.__isShowing&&(TcHmi.TopMostLayer.remove(this.__parentControl,this.__element),this.__isShowing=!1)}destroy(){for(let i=0,ii=this.__eventDestroyers.length;i<ii;i++)this.__eventDestroyers[i]();this.__eventDestroyers=[]}isShowing(){return this.__isShowing}addData(data){if(data){for(let i=0,ii=data.length;i<ii;i++)data[i].startTime=new Date(data[i].startTime).toISOString(),data[i].endTime=new Date(data[i].endTime).toISOString();data.sort((a,b)=>-a.startTime.localeCompare(b.startTime))}if(this.__data=data,data){let existingItemBefore=this.__data.find(elem=>this.__activeData&&elem.id===this.__activeData.id);this.__elementNoDataText.style.display="none";let actElementsLength=this.__elementList.children.length;for(let i=0,ii=Math.min(actElementsLength,data.length);i<ii;i++){let elem=this.__elementList.children.item(i);elem&&(elem.innerHTML=data[i].name+" ("+this.__calcRoundedValue(data[i].startTime,data[i].endTime)+") <br>["+data[i].startTime+", "+data[i].endTime+"]",existingItemBefore&&data[i].id===existingItemBefore.id?(elem.classList.add("active"),elem.appendChild(this.__elementRecordTimespanControl)):elem.classList.remove("active"))}if(0===data.length){for(let i=this.__elementList.children.length-1,ii=0;i>=ii;i--){let elem=this.__elementList.children.item(i);elem&&(elem.removeEventListener("mousedown",this.__onMouseDownList),this.__elementList.removeChild(elem))}this.__elementNoDataText.style.display=""}else if(actElementsLength<data.length)for(let i=actElementsLength,ii=data.length;i<ii;i++){let node=document.createElement("li");node.addEventListener("mousedown",this.__onMouseDownList),node.appendChild(document.createTextNode(data[i].name+" ("+this.__calcRoundedValue(data[i].startTime,data[i].endTime)+")")),node.appendChild(document.createElement("br")),node.appendChild(document.createTextNode("["+data[i].startTime+", "+data[i].endTime+"]")),this.__elementList.appendChild(node)}else if(actElementsLength>data.length)for(let i=actElementsLength,ii=data.length;i>=ii;i--){let elem=this.__elementList.children.item(i);elem&&(elem.removeEventListener("mousedown",this.__onMouseDownList),this.__elementList.removeChild(elem))}}else{for(let i=this.__elementList.children.length-1,ii=0;i>=ii;i--){let elem=this.__elementList.children.item(i);elem&&(elem.removeEventListener("mousedown",this.__onMouseDownList),this.__elementList.removeChild(elem))}this.__elementNoDataText.style.display=""}this.__loadingSpinner&&(this.__loadingSpinner.remove(),this.__elementLoadingOverlay.style.display="none")}__calcValuesFromSlider(){if(this.__activeData){let minBoundingRect=this.__elementSliderMin.getBoundingClientRect(),maxBoundingRect=this.__elementSliderMax.getBoundingClientRect(),templateBoundingRect=this.__elementSliderTemplate.getBoundingClientRect(),fullPixel=templateBoundingRect.width-maxBoundingRect.width-minBoundingRect.width,startTime=this.__activeData.startTime,endTime=this.__activeData.endTime;if(startTime&&endTime){let timePerPixel=(Date.parse(endTime)-Date.parse(startTime))/fullPixel,newInterval=timePerPixel*this.__elementSliderValue.getBoundingClientRect().width,t=new Date(newInterval),days=parseInt((newInterval/1e3/60/60/24).toString(),10),intervalTime="00 d 00:00:00.000";startTime<endTime&&(intervalTime=`${`0${days}`.slice(-2)} d ${`0${t.getUTCHours()}`.slice(-2)}:${`0${t.getUTCMinutes()}`.slice(-2)}:${`0${t.getUTCSeconds()}`.slice(-2)}.${`00${t.getUTCMilliseconds()}`.slice(-3)}`),this.__intervalTime.setText(intervalTime);let startOffset=(minBoundingRect.left-templateBoundingRect.left)*timePerPixel,newStartMilliseconds=Date.parse(this.__activeData.startTime)+startOffset,newStartDate=new Date(newStartMilliseconds);this.__datetimeStart.setValue(newStartDate.toISOString());let endOffset=(templateBoundingRect.left+templateBoundingRect.width-maxBoundingRect.width-maxBoundingRect.left)*timePerPixel,newEndMilliseconds=Date.parse(this.__activeData.endTime)-endOffset,newEndDate=new Date(newEndMilliseconds);this.__datetimeEnd.setValue(newEndDate.toISOString())}let calcStartTime=this.__datetimeStart.getValue(),calcEndTime=this.__datetimeEnd.getValue();calcStartTime&&calcEndTime&&(this.__activeData.startTimeNow=calcStartTime,this.__activeData.endTimeNow=calcStartTime,this.__setRoundedValueText(calcStartTime,calcEndTime))}}__calcSliderFromValues(){if(this.__activeData){let originalStartTime=this.__activeData.startTime,originalEndTime=this.__activeData.endTime,startTimeNow=this.__datetimeStart.getValue(),endTimeNow=this.__datetimeEnd.getValue();if(originalStartTime&&originalEndTime&&startTimeNow&&endTimeNow){let minBoundingRect=this.__elementSliderMin.getBoundingClientRect(),maxBoundingRect=this.__elementSliderMax.getBoundingClientRect(),fullPixel=this.__elementSliderTemplate.getBoundingClientRect().width-maxBoundingRect.width-minBoundingRect.width,fullTimespan=Date.parse(originalEndTime)-Date.parse(originalStartTime),actTimespan=Date.parse(endTimeNow)-Date.parse(startTimeNow),pixelPerTime=fullPixel/fullTimespan,pixelWidthForStart=pixelPerTime*(Date.parse(startTimeNow)-Date.parse(originalStartTime));if(this.__elementSliderMin.style.left=pixelWidthForStart+"px",startTimeNow<endTimeNow){let pixelWidthForEnd=pixelPerTime*(Date.parse(endTimeNow)-Date.parse(originalStartTime));this.__elementSliderMax.style.left=pixelWidthForEnd+maxBoundingRect.width+"px",this.__elementSliderValue.style.width=pixelWidthForEnd-pixelWidthForStart+"px",this.__elementSliderValue.style.left=pixelWidthForStart+minBoundingRect.width+"px"}else this.__elementSliderMax.style.left=pixelWidthForStart+maxBoundingRect.width+"px",this.__elementSliderValue.style.width="0px",this.__elementSliderValue.style.left=pixelWidthForStart+minBoundingRect.width+"px";let t=new Date(actTimespan),days=parseInt((actTimespan/1e3/60/60/24).toString(),10),intervalTime="00 d 00:00:00.000";startTimeNow<endTimeNow&&(intervalTime=`${`0${days}`.slice(-2)} d ${`0${t.getUTCHours()}`.slice(-2)}:${`0${t.getUTCMinutes()}`.slice(-2)}:${`0${t.getUTCSeconds()}`.slice(-2)}.${`00${t.getUTCMilliseconds()}`.slice(-3)}`),this.__activeData.startTimeNow=startTimeNow,this.__activeData.endTimeNow=endTimeNow,this.__intervalTime.setText(intervalTime),this.__setRoundedValueText(startTimeNow,endTimeNow)}}}__getTextWidth(text,font){let context=document.createElement("canvas").getContext("2d");if(context){return context.font=font,context.measureText(text).width}return 0}__setRoundedValueText(startTime,endTime){let newText=this.__calcRoundedValue(startTime,endTime),diff=Date.parse(endTime)-Date.parse(startTime);this.__elementSliderValueText.innerText=newText,this.__getTextWidth(this.__elementSliderValueText.innerText.trim(),this.__textFontStyle)>this.__elementSliderValue.getBoundingClientRect().width?this.__elementSliderValueText.style.display="none":this.__elementSliderValueText.style.display="",diff<=0?this.__applyButton.setIsEnabled(!1):this.__applyButton.setIsEnabled(!0)}__calcRoundedValue(startTime,endTime){let newText="",diff=Date.parse(endTime)-Date.parse(startTime),interval={days:0,hours:0,minutes:0,seconds:0};diff>0&&(interval={days:Math.floor(diff/1e3/60/60/24),hours:Math.floor(diff/1e3/60/60),minutes:Math.floor(diff/1e3/60),seconds:Math.floor(diff/1e3)});let timeAlias="",value=0;return interval.days>0?(timeAlias="d",value=interval.days):interval.hours>0?(timeAlias="h",value=interval.hours):interval.minutes>0?(timeAlias="m",value=interval.minutes):interval.seconds>0?(timeAlias="s",value=interval.seconds):newText="<1 s",newText=">"+value.toString()+" "+timeAlias,newText}__onCancelPressed(_event){this.hide()}__onRefreshPressed(_event){this.__loadingSpinner&&(this.__elementLoading.appendChild(this.__loadingSpinner),this.__elementLoadingOverlay.style.display=""),this.__parentControl.__serverSymbolsHelper.getAnalyticsData()}__onApplyPressed(_event){if(this.__activeData){let startTime=this.__datetimeStart.getValue(),endTime=this.__datetimeEnd.getValue();startTime&&endTime&&this.__parentControl.__serverSymbolsHelper.setAnalyticsRecord(this.__activeData.name,this.__activeData.id,startTime,endTime)}}__onValueChangedStart(_event){this.__ignoreDateTimeInputEvents||this.__calcSliderFromValues()}__onValueChangedEnd(_event){this.__ignoreDateTimeInputEvents||this.__calcSliderFromValues()}__onMouseDownList(event){const target=event.target;if("LI"===target.nodeName)if(target.classList.contains("active"))target.classList.remove("active"),target.removeChild(this.__elementRecordTimespanControl),this.__activeData=null;else{for(let i=0,ii=this.__elementList.children.length;i<ii;i++)this.__elementList.children[i].classList.remove("active");if(target.classList.add("active"),target.appendChild(this.__elementRecordTimespanControl),target.parentElement){this.__ignoreDateTimeInputEvents=!0;let index=Array.prototype.indexOf.call(target.parentElement.children,event.target),activeAnalyticsData=this.__data[index]||null;if(!activeAnalyticsData)return;this.__activeData={id:activeAnalyticsData.id,name:activeAnalyticsData.name,startTime:activeAnalyticsData.startTime,endTime:activeAnalyticsData.endTime,startTimeNow:activeAnalyticsData.startTime,endTimeNow:activeAnalyticsData.endTime},this.__datetimeStart.setMinValue(this.__activeData.startTime),this.__datetimeStart.setMaxValue(this.__activeData.endTime),this.__datetimeStart.setValue(this.__activeData.startTime),this.__datetimeEnd.setMinValue(this.__activeData.startTime),this.__datetimeEnd.setMaxValue(this.__activeData.endTime),this.__datetimeEnd.setValue(this.__activeData.endTime);let sliderTemplateBoundingRect=this.__elementSliderTemplate.getBoundingClientRect(),sliderMaxBoundingRect=this.__elementSliderMax.getBoundingClientRect(),sliderMinBoundingRect=this.__elementSliderMin.getBoundingClientRect(),min=0,max=sliderTemplateBoundingRect.width-sliderMaxBoundingRect.width;this.__elementSliderMin.style.left=min+"px",this.__elementSliderMax.style.left=max+"px",this.__elementSliderValue.style.width=sliderTemplateBoundingRect.width-sliderMaxBoundingRect.width-sliderMinBoundingRect.width+"px",this.__elementSliderValue.style.left=sliderMinBoundingRect.width+"px";let actTimespan=Date.parse(this.__activeData.endTime)-Date.parse(this.__activeData.startTime),t=new Date(actTimespan),days=parseInt((actTimespan/1e3/60/60/24).toString(),10),intervalTime="00 d 00:00:00.000";this.__activeData.startTime<this.__activeData.endTime&&(intervalTime=`${`0${days}`.slice(-2)} d ${`0${t.getUTCHours()}`.slice(-2)}:${`0${t.getUTCMinutes()}`.slice(-2)}:${`0${t.getUTCSeconds()}`.slice(-2)}.${`00${t.getUTCMilliseconds()}`.slice(-3)}`),this.__intervalTime.setText(intervalTime),this.__setRoundedValueText(this.__activeData.startTime,this.__activeData.endTime),this.__ignoreDateTimeInputEvents=!1}}}__onMouseDown(event){const target=event.target;this.__draggingInfo={isDragging:!0,draggingElem:target,offsetLeft:this.__elementSliderTemplate.getBoundingClientRect().left,startPositionX:event.clientX}}__onTouchStart(event){const target=event.target;this.__draggingInfo={isDragging:!0,draggingElem:target,offsetLeft:this.__elementSliderTemplate.getBoundingClientRect().left,startPositionX:event.touches[0].clientX}}__onMouseMove(event){if(this.__draggingInfo.isDragging&&this.__draggingInfo.draggingElem){if(this.__draggingInfo.draggingElem.classList.contains("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-knob-min-value")){let boundingRectMax=this.__elementSliderMax.getBoundingClientRect(),boundingRectTarget=this.__draggingInfo.draggingElem.getBoundingClientRect(),offsetX=boundingRectTarget.left-this.__elementSliderTemplate.getBoundingClientRect().left+(event.clientX-this.__draggingInfo.startPositionX),min=0,max=boundingRectMax.left-boundingRectMax.width-this.__elementSliderTemplate.getBoundingClientRect().left;offsetX=offsetX<min?min:offsetX,offsetX=offsetX>max?max:offsetX,this.__draggingInfo.draggingElem.style.left=offsetX+"px";let positionMax=this.__elementSliderTemplate.getBoundingClientRect().width-max-boundingRectMax.width;this.__elementSliderValue.style.width="calc(100% - "+(offsetX+boundingRectTarget.width+positionMax)+"px)",this.__elementSliderValue.style.left=offsetX+boundingRectTarget.width+"px"}else if(this.__draggingInfo.draggingElem.classList.contains("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-knob-max-value")){let boundingRectMin=this.__elementSliderMin.getBoundingClientRect(),boundingRectTarget=this.__draggingInfo.draggingElem.getBoundingClientRect(),offsetX=boundingRectTarget.left-this.__elementSliderTemplate.getBoundingClientRect().left+(event.clientX-this.__draggingInfo.startPositionX),min=boundingRectMin.left+boundingRectMin.width-this.__elementSliderTemplate.getBoundingClientRect().left,max=this.__elementSliderTemplate.getBoundingClientRect().width-boundingRectTarget.width;offsetX=offsetX<min?min:offsetX,offsetX=offsetX>max?max:offsetX,this.__draggingInfo.draggingElem.style.left=offsetX+"px",this.__elementSliderValue.style.width=offsetX-min+"px"}this.__draggingInfo.startPositionX=event.clientX,this.__calcValuesFromSlider()}}__onTouchMove(event){if(this.__draggingInfo.isDragging&&this.__draggingInfo.draggingElem){if(this.__draggingInfo.draggingElem.classList.contains("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-knob-min-value")){let boundingRectMax=this.__elementSliderMax.getBoundingClientRect(),boundingRectTarget=this.__draggingInfo.draggingElem.getBoundingClientRect(),offsetX=boundingRectTarget.left-this.__elementSliderTemplate.getBoundingClientRect().left+(event.touches[0].clientX-this.__draggingInfo.startPositionX),min=0,max=boundingRectMax.left-boundingRectMax.width-this.__elementSliderTemplate.getBoundingClientRect().left;offsetX=offsetX<min?min:offsetX,offsetX=offsetX>max?max:offsetX,this.__draggingInfo.draggingElem.style.left=offsetX+"px";let positionMax=this.__elementSliderTemplate.getBoundingClientRect().width-max-boundingRectMax.width;this.__elementSliderValue.style.width="calc(100% - "+(offsetX+boundingRectTarget.width+positionMax)+"px)",this.__elementSliderValue.style.left=offsetX+boundingRectTarget.width+"px"}else if(this.__draggingInfo.draggingElem.classList.contains("TcHmi_Controls_Beckhoff_TcHmiScopeControl_TcHmiScopeControl-slider-knob-max-value")){let boundingRectMin=this.__elementSliderMin.getBoundingClientRect(),boundingRectTarget=this.__draggingInfo.draggingElem.getBoundingClientRect(),offsetX=boundingRectTarget.left-this.__elementSliderTemplate.getBoundingClientRect().left+(event.touches[0].clientX-this.__draggingInfo.startPositionX),min=boundingRectMin.left+boundingRectMin.width-this.__elementSliderTemplate.getBoundingClientRect().left,max=this.__elementSliderTemplate.getBoundingClientRect().width-boundingRectTarget.width;offsetX=offsetX<min?min:offsetX,offsetX=offsetX>max?max:offsetX,this.__draggingInfo.draggingElem.style.left=offsetX+"px",this.__elementSliderValue.style.width=offsetX-min+"px"}this.__draggingInfo.startPositionX=event.touches[0].clientX,this.__calcValuesFromSlider()}}__onMouseUp(_event){this.__draggingInfo.isDragging&&(this.__draggingInfo.isDragging=!1)}__onTouchEnd(_event){this.__draggingInfo.isDragging&&(this.__draggingInfo.isDragging=!1)}}})();export{TimeRangeDialog};